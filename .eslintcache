[{"C:\\Users\\r_sey\\Documents\\GitHub\\ttc-arrivals\\src\\index.js":"1","C:\\Users\\r_sey\\Documents\\GitHub\\ttc-arrivals\\src\\serviceWorkerRegistration.js":"2","C:\\Users\\r_sey\\Documents\\GitHub\\ttc-arrivals\\src\\App.js":"3","C:\\Users\\r_sey\\Documents\\GitHub\\ttc-arrivals\\src\\api\\index.js":"4","C:\\Users\\r_sey\\Documents\\GitHub\\ttc-arrivals\\src\\components\\PolyLineOverlay.js":"5","C:\\Users\\r_sey\\Documents\\GitHub\\ttc-arrivals\\src\\components\\Stops.js":"6","C:\\Users\\r_sey\\Documents\\GitHub\\ttc-arrivals\\src\\components\\Path.js":"7","C:\\Users\\r_sey\\Documents\\GitHub\\ttc-arrivals\\src\\components\\BusLocation.js":"8","C:\\Users\\r_sey\\Documents\\GitHub\\ttc-arrivals\\src\\components\\InfoBox.js":"9","C:\\Users\\r_sey\\Documents\\GitHub\\ttc-arrivals\\src\\components\\StopBox.js":"10"},{"size":978,"mtime":1608737218418,"results":"11","hashOfConfig":"12"},{"size":5064,"mtime":499162500000,"results":"13","hashOfConfig":"12"},{"size":5353,"mtime":1609184066561,"results":"14","hashOfConfig":"12"},{"size":1254,"mtime":1609181859953,"results":"15","hashOfConfig":"12"},{"size":808,"mtime":1608851683891,"results":"16","hashOfConfig":"12"},{"size":859,"mtime":1609092721724,"results":"17","hashOfConfig":"12"},{"size":367,"mtime":1609129000837,"results":"18","hashOfConfig":"12"},{"size":427,"mtime":1609015369598,"results":"19","hashOfConfig":"12"},{"size":1215,"mtime":1609178308998,"results":"20","hashOfConfig":"12"},{"size":1537,"mtime":1609177321613,"results":"21","hashOfConfig":"12"},{"filePath":"22","messages":"23","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},"t6tdyv",{"filePath":"25","messages":"26","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},{"filePath":"27","messages":"28","errorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"29","usedDeprecatedRules":"24"},{"filePath":"30","messages":"31","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},{"filePath":"32","messages":"33","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"34","messages":"35","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},{"filePath":"36","messages":"37","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},{"filePath":"38","messages":"39","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},{"filePath":"40","messages":"41","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"42","usedDeprecatedRules":"24"},{"filePath":"43","messages":"44","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},"C:\\Users\\r_sey\\Documents\\GitHub\\ttc-arrivals\\src\\index.js",[],["45","46"],"C:\\Users\\r_sey\\Documents\\GitHub\\ttc-arrivals\\src\\serviceWorkerRegistration.js",[],"C:\\Users\\r_sey\\Documents\\GitHub\\ttc-arrivals\\src\\App.js",["47","48","49","50","51","52"],"import React, { useState, useEffect } from \"react\";\nimport ReactLoading from \"react-loading\";\nimport ReactMapGL, {FlyToInterpolator, WebMercatorViewport, NavigationControl, ScaleControl, FullscreenControl } from \"react-map-gl\";\nimport \"./App.css\";\n\nimport { fetchBusLocation, fetchStopTimes, fetchRouteInfo, fetchAllRoutes } from \"./api\";\nimport Stops from \"./components/Stops\";\nimport Path from \"./components/Path\";\nimport BusLocation from \"./components/BusLocation\";\nimport InfoBox from \"./components/InfoBox\";\nimport StopBox from \"./components/StopBox\";\n\nfunction App() {\n\n\tconst [loading, setLoading] = useState(true);\n\tconst [viewport, setviewport] = useState({\n\t\tlatitude: 43.6534817,\n\t\tlongitude: -79.3839347,\n\n\t\tbearing: -16,\n\t\tzoom: 10,\n\t});\n\tconst [busLocation, setBusLocation] = useState([]);\n\tconst [routeInfo, setRouteInfo] = useState({});\n\tconst [allRoutes, setAllRoutes] = useState([]);\n\tconst [busRoute, setBusRoute] = useState();\n\tconst [selectedStop, setSelectedStop] = useState(null);\n\tconst [stopTimes, setStopTimes] = useState({});\n\tconst [bounds, setBounds] = useState();\n\n\tuseEffect(() => {\n\t\tsetLoading(true);\n\t\tsetTimeout(async () => {\n\t\t\tsetAllRoutes(await fetchAllRoutes());\n\t\t},0);\n\t\tsetLoading(false);\n\t}, []);\n\n\tuseEffect(() => {\n\t\tsetLoading(true);\n\t\tsetTimeout(async () => {\n\t\t\tsetRouteInfo(await fetchRouteInfo(busRoute));\n\t\t\tsetLoading(false);\n\t\t},0);\n\t\t\t\n\t}, [busRoute]);\n\n\tuseEffect(() => {\n\t\tconst fetchAPI = async () => {\n\t\t\tsetBusLocation(await fetchBusLocation(busRoute));\n\t\t};\n\t\tfetchAPI();\n\t\tconst interval = setInterval(() => fetchAPI(), 20000);\n\t\treturn () => {\n\t\t\tclearInterval(interval);\n\t\t};\n\t}, [busRoute]);\n\n\tuseEffect(() => {\n\t\tconst fetchAPI = async () => {\n\t\t\t\n\t\t\tselectedStop && setStopTimes(await fetchStopTimes(busRoute, selectedStop?.id));\n\t\t\tsetLoading(false);\n\t\t};\n\t\tsetStopTimes({});\n\t\tsetLoading(true);\n\t\tfetchAPI();\n\t\tconst interval = setInterval(() => fetchAPI(), 20000);\n\t\treturn () => {\n\t\t\tclearInterval(interval);\n\t\t};\n\t}, [selectedStop, busRoute]);\n\n\tuseEffect(() => {\n\t\tconst listener = (e) => {\n\t\t\tif (e.key === \"Escape\") {\n\t\t\t\tsetSelectedStop(null);\n\t\t\t}\n\t\t};\n\t\twindow.addEventListener(\"keydown\", listener);\n\t\treturn () => {\n\t\t\twindow.removeEventListener(\"keydown\", listener);\n\t\t};\n\t}, []);\n\n\tuseEffect(() => {\n\t\tif (Object.entries(routeInfo).length !== 0){\n\t\t\tsetBounds([routeInfo.bounds?.sw.lon, routeInfo.bounds?.sw.lat, routeInfo.bounds?.ne.lon, routeInfo.bounds?.ne.lat]);\n\t\t}\n\t\n\t}, [routeInfo]);\n\n\tuseEffect(() => {\n\t\tif (bounds?.length > 0 && bounds[0] !== undefined && Object.entries(routeInfo).length !== 0){\n\t\t\tchangeViewPort();\n\t\t}\n\t\t\t\t\n\t}, [bounds])\n\n\n\tconst changeViewPort = () => {\n\n\t\tif(window.innerWidth <= 640){\n\t\t\tvar {longitude, latitude, zoom} = new WebMercatorViewport(viewport)\n            .fitBounds([[bounds[2], bounds[3]], [bounds[0], bounds[1]]], {\n              padding: 50,\n\n\t\t\t});\n\t\t\tvar newviewport = {\n\t\t\t\tviewport,\n\t\t\t\tlongitude,\n\t\t\t\tlatitude,\n\t\t\t\tzoom,\n\t\t\t\ttransitionDuration: 1500,\n\t\t\t\ttransitionInterpolator: new FlyToInterpolator(),\n\t\t\t\t\n\t\t\t}\n\t\t\tsetviewport(newviewport);\n\t\t}else {\n\t\t\tvar {longitude, latitude, zoom} = new WebMercatorViewport(viewport)\n            .fitBounds([[bounds[2], bounds[3]], [bounds[0], bounds[1]]], {\n              padding: 50,\n              offset: [400,0]\n\t\t\t});\n\t\t\tvar newviewport = {\n\t\t\t\tviewport,\n\t\t\t\tlongitude,\n\t\t\t\tlatitude,\n\t\t\t\tzoom,\n\t\t\t\ttransitionDuration: 1500,\n\t\t\t\ttransitionInterpolator: new FlyToInterpolator(),\n\t\t\t\t\n\t\t\t}\n\t\t\tsetviewport(newviewport);\n\t\t}\n\t\t\n\t}\n\n\tconst handleRouteChange = (event) => {\n\t\tsetBusRoute(event.target.getAttribute(\"tag\"));\t\t\n\t};\n\n\treturn (\n\t\t<div className=\"App\">\n\t\t\t{selectedStop ? (\n\t\t\t\t<StopBox selectedStop={selectedStop} stopTimes={stopTimes} setSelectedStop={setSelectedStop} setStopTimes={setStopTimes} route={busRoute} loading={loading}/>\n\t\t\t) : (\n\t\t\t\t<InfoBox routes={allRoutes} handleRouteChange={handleRouteChange}/>\n\t\t\t)}\n\n\t\t\t<div className=\"mapContainer\">\n\t\t\t\t<ReactMapGL\n\t\t\t\t\tclassName=\"map\"\n\t\t\t\t\t{...viewport}\n\t\t\t\t\twidth=\"100%\"\n      \t\t\t\theight=\"100%\"\n\t\t\t\t\tmapboxApiAccessToken={process.env.REACT_APP_MAPBOX_ACCESS_TOKEN}\n\t\t\t\t\tmapStyle=\"mapbox://styles/seyon100/ckiz9arnc0sxe19o51hatbmuv?optimize=true\"\n\t\t\t\t\tstyle={{ width: '100%' }}\n\t\t\t\t\tonViewportChange={(viewport) => {\n\t\t\t\t\t\tif (viewport.pitch < 0) {\n\t\t\t\t\t\t\tviewport.pitch = 0;\n\t\t\t\t\t\t} else if (viewport.pitch > 25) {\n\t\t\t\t\t\t\tviewport.pitch = 25;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// viewport.height='100%';\n\t\t\t\t\t\t// viewport.width='100%';\n\n\t\t\t\t\t\tsetviewport(viewport);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t\n\t\t\t\t\t<Path path={routeInfo.paths}></Path>\n\n\t\t\t\t\t<Stops stops={routeInfo.stops} setSelectedStop={setSelectedStop}></Stops>\n\n\t\t\t\t\t<BusLocation busLocation={busLocation}></BusLocation>\n\n\t\t\t\t\t{/* Map Navigation Buttons */}\n\t\t\t\t\t<div style={{ position: \"absolute\", right: 10, bottom: 80 }}>\n\t\t\t\t\t\t<NavigationControl />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div style={{ position: \"absolute\", right: 10, bottom: 40 }}>\n\t\t\t\t\t\t<FullscreenControl />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div style={{ position: \"absolute\", right: 60, bottom: 40 }}>\n\t\t\t\t\t\t<ScaleControl maxWidth={100} unit={\"metric\"} />\n\t\t\t\t\t</div>\n\t\t\t\t</ReactMapGL>\n\t\t\t</div>\n\n\t\t\t<div className=\"footer\">\n\t\t\t\t<p>\n\t\t\t\t\tMade with ‚ù§ by\n\t\t\t\t\t<a href=\"https://github.com/seyon123\" target=\"_blank\" rel=\"noopener noreferrer\">\n\t\t\t\t\t\t{\" \"}\n\t\t\t\t\t\tSeyon Rajagopal{\" \"}\n\t\t\t\t\t</a>\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default App;\n","C:\\Users\\r_sey\\Documents\\GitHub\\ttc-arrivals\\src\\api\\index.js",[],"C:\\Users\\r_sey\\Documents\\GitHub\\ttc-arrivals\\src\\components\\PolyLineOverlay.js",[],"C:\\Users\\r_sey\\Documents\\GitHub\\ttc-arrivals\\src\\components\\Stops.js",[],"C:\\Users\\r_sey\\Documents\\GitHub\\ttc-arrivals\\src\\components\\Path.js",[],"C:\\Users\\r_sey\\Documents\\GitHub\\ttc-arrivals\\src\\components\\BusLocation.js",[],"C:\\Users\\r_sey\\Documents\\GitHub\\ttc-arrivals\\src\\components\\InfoBox.js",["53"],"import React from 'react'\r\nimport ReactLoading from \"react-loading\";\r\nimport './InfoBox.css'\r\n\r\nfunction InfoBox({routes, handleRouteChange}) {\r\n    return (\r\n        <div className=\"infoBox\">\r\n\t\t\t<div className=\"infoBoxHeader\">\r\n\t\t\t\t<img className=\"logo\" src=\"ttc.png\" alt=\"logo\"/>\r\n\t\t\t\t<div className=\"infoBoxTitle\">Live Transit Map</div>\r\n\t\t\t\t<hr className=\"infoBoxDivider\"/>\r\n\t\t\t\t\r\n\t\t\t</div>\r\n\t\t\t<div className=\"routes\">\r\n\t\t\t{routes?.length > 0 ? \r\n\t\t\t\troutes.map(({id, title}) => (\r\n\t\t\t\t\t<div tag={id} key={id} className=\"route\" onClick={handleRouteChange}>\r\n\t\t\t\t\t\t<div tag={id} className=\"routeNum\">{id}</div>\r\n\t\t\t\t\t\t<h1 tag={id} className=\"routeTitle\">{title?.split(\"-\", 2)[1]?.split(\"Night\")[0]?.split(\"Express\")[0]}</h1>\r\n\t\t\t\t\t\t<div tag={id} className=\"tags\">\r\n\t\t\t\t\t\t{title.split(\"Express\").length > 1 && \r\n\t\t\t\t\t\t\t<div tag={id} className=\"tag\">Express</div>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t{title.split(\"Night\").length > 1 && \r\n\t\t\t\t\t\t\t<div tag={id} className=\"tag\">Night</div>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t))\r\n\t\t\t: \r\n\t\t\t\r\n\t\t\t\t<div className=\"error\">\r\n\t\t\t\t\tThere was an error fetching transit information. Please try again later.\r\n\t\t\t\t</div>\r\n\t\t\t}\r\n\t\t\t</div>\r\n\t\t\t\r\n\t\t</div>\r\n    )\r\n}\r\n\r\nexport default InfoBox\r\n","C:\\Users\\r_sey\\Documents\\GitHub\\ttc-arrivals\\src\\components\\StopBox.js",[],{"ruleId":"54","replacedBy":"55"},{"ruleId":"56","replacedBy":"57"},{"ruleId":"58","severity":1,"message":"59","line":2,"column":8,"nodeType":"60","messageId":"61","endLine":2,"endColumn":20},{"ruleId":"62","severity":1,"message":"63","line":98,"column":5,"nodeType":"64","endLine":98,"endColumn":13,"suggestions":"65"},{"ruleId":"66","severity":1,"message":"67","line":120,"column":9,"nodeType":"60","messageId":"68","endLine":120,"endColumn":18},{"ruleId":"66","severity":1,"message":"69","line":120,"column":20,"nodeType":"60","messageId":"68","endLine":120,"endColumn":28},{"ruleId":"66","severity":1,"message":"70","line":120,"column":30,"nodeType":"60","messageId":"68","endLine":120,"endColumn":34},{"ruleId":"66","severity":1,"message":"71","line":125,"column":8,"nodeType":"60","messageId":"68","endLine":125,"endColumn":19},{"ruleId":"58","severity":1,"message":"59","line":2,"column":8,"nodeType":"60","messageId":"61","endLine":2,"endColumn":20},"no-native-reassign",["72"],"no-negated-in-lhs",["73"],"no-unused-vars","'ReactLoading' is defined but never used.","Identifier","unusedVar","react-hooks/exhaustive-deps","React Hook useEffect has missing dependencies: 'changeViewPort' and 'routeInfo'. Either include them or remove the dependency array.","ArrayExpression",["74"],"no-redeclare","'longitude' is already defined.","redeclared","'latitude' is already defined.","'zoom' is already defined.","'newviewport' is already defined.","no-global-assign","no-unsafe-negation",{"desc":"75","fix":"76"},"Update the dependencies array to be: [bounds, changeViewPort, routeInfo]",{"range":"77","text":"78"},[2621,2629],"[bounds, changeViewPort, routeInfo]"]